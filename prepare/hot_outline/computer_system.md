# 操作系统（更多面试问题，欢迎关注微信公众号「帅地玩编程」）

## 进程的通信方式

### 管道

- 匿名管道：例如Linux中的 |。只有血缘关系的才能共享
- 命名管道：例如用 mkfifo创建：mkfifo
- 特点：单向传输、同步交付，不适合频繁通信的进程

### 消息队列

- 这种通信类似于缓存，互相发消息
- 缺点：需要拷贝，不适合发送数据很大的
- 提供 msgsnd 和 msgcv 来接收和发送消息

### 共享内存

- 虽然两个进程有着不同的虚拟内存空间，但我们可以把部分映射到相同的物理空间中
- 存在问题：并发安全问题，解决方式是采用信号量

### 信号量

### Socket

### 信号

- 类似于硬件中断
- 异步处理，公平对待

## 进程有哪些数据

### 标识符

### 状态

### 程序计数器

### 优先级

### 内存指针：保存程序代码、数据集

### 上下文数据：进程执行时处理器的寄存器中的数据

### I/O 状态信息

## 进程与线程的区别

### 进程主要组成是代码块和数据集，进程是拥有资源的基本单位，而线程是调度的基本单位

### 系统开销不同：进程需要保存虚拟内存信息、栈、全部变量等信息，而线程只需要保存一些私有变量

### 通信方式

## 进程调度算法

### 批处理系统

- 先来先服务
- 短作业优先
- 最短剩余时间优先（抢占）

### 交互系统

- 时间片轮转
- 优先级调度：优先级低的可以随着时间越来越高
- 多级反馈队列：每个队列的时间片不同

## 死锁处理方法

### 鸵鸟策略：啥也不管，当做没发生

### 死锁检测与恢复

- 死锁检测

  - 每种资源只有一个：通过有向图是否成环来判断
  - 多个资源：主要是通过矩阵来判断剩余资源于请求资源的关系

- 死锁恢复

  - 利用抢占恢复
  - 利用回滚恢复
  - 通过杀死进程恢复

### 死锁预防

- 破坏互斥
- 破坏不可抢占
- 破坏环路等待

### 死锁避免

- 如果没有死锁发生，并且即使所有进程突然请求对资源的最大需求，也仍然存在某种调度次序能够使得每个进程运行完毕，则成为该序列是安全的。
- 银行家算法

## 内存管理

### 虚拟内存

- 可以让物理内存扩充成更大的逻辑内存，从而让程序获得更多的可用内存

### 分页系统地址映射

- 内存管理单元管理着地址空间和物理空间的转化，页表存储着页和页框（物理地址）的映射
- 虚拟地址分为两部分，前面存放页面号，后面存放偏移量

### 分段

### 页面置换算法

- 最佳：最换的页面将最长时间不实用（理想）
- 最近最久未使用（LRU）
- 最近未使用：用R表示被访问，M表示被修改，定期将R置为0
- 先进先出
- 第二次机会算法：对FIFO的优化，对页面做一个R的标志位。如果是0则置换，如果是1，则改为0，然后把节点放到链表尾部
- 时钟：对上面算法的优化，把链表改成环形链表，这样就不需要移动节点了，并且用一个指针指向最老的页面
