# 中断

分为由外界硬件设备产生的**硬件中断**，用户程序调用系统接口产生的**软件中断**。

中断处理：系统转入内核并保存现场，通过中断向量表找到对应的中断处理程序；

## 硬件中断

1. 操作系统通过设备驱动程序给设备控制器分配任务, 之后CPU就可以开始其他工作, 而不必等待.
2. 在任务完成时, 设备控制器通知中断控制器, 中断控制器根据信号屏蔽状态决定是否响应该信号.
3. 如果中断控制器决定响应, 将会通知CPU, 并将信号编号发送给CPU.
4. CPU一旦决定响应中断, 会先保存现场, 例如将PC, 寄存器等压入堆栈, 然后切换到内核态. 根据信号编号, 找到对应的中断处理程序, 并执行之. 完成后恢复到之前的状态继续运行.

## 软件中断

用户程序调用系统接口时产生. 通过中断向量表转向系统调用表, 找到对应的系统调用, 并执行之.
