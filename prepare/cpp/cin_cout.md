# cin cout endl

## 缓冲设计

iostream 缓冲分为：全缓冲、行缓冲和不带缓冲。

1. 全缓冲: 这种情况下填满 io buffer 才会进行实际 io 操作。全缓冲的典型代表是磁盘读写；
2. 行缓冲：在这种情况下，当输入输出中碰到换行符才会执行真正的 io 操作。这时，我们输入的字符先存放在缓冲区，等按下回车键时才执行真正的 io 操作；
3. 不带缓冲：也就是不进行缓冲，标准出错情况 stderr 是典型代表，这使出错信息可以直接尽快地显示出来。

### 缓冲区刷新触发

下列情况会触发缓冲区的刷新：

1. 缓冲区满；
2. 执行 flush 语句；
3. 执行 endl 语句；
4. 一个输出流可能被关联到另一个流。在这种情况下，当读写被关联的流时，关联到的流的缓冲区会被刷新。例如，默认情况下，cin 和 cerr 都关联到 cout。因此，读 cin 或写 cerr 都会导致 cout 的缓冲区被刷新；
5. 关闭文件；
6. unitbuf 会触发缓冲；

```cpp
cout << unitbuf;  //所有输出操作后都会立即刷新缓冲区
//任何输出都立即刷新，无缓冲
cout << nounitbuf;  //回到正常的缓冲方式
```

### 默认缓冲

* cin 默认是行缓冲；
