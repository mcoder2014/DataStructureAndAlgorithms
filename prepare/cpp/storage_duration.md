# 存储类说明符

## 包括

1. ~~auto (c++11更改)~~
2. ~~register (C++11弃用)~~
3. static 静态 或者 线程存储期和内部连接
   > 当在类成员的声明中使用时，它声明静态成员。当在对象声明中使用时，它指定静态存储期（除非与 thread_local 协同出现）。在命名空间作用域的声明中使用时，它指定内部连接。
4. extern 静态 或者 线程存储期和外部连接
   > 它指定外部连接，而且技术上不影响存储期，但它不能用于自动存储期的对象的定义，故所有 extern 对象都具有静态或线程存储期。另外，使用 extern 且无初始化器的声明不是定义。
5. thread_local 线程存储期 (C++11起)
    > 它指示对象具有线程存储期。它能与 static 或 extern 结合，以分别指定内部或外部连接（但静态数据成员始终拥有外部链接），但额外的 static 不影响存储期。
6. mutable 不影响存储期或连接

## 存储期

程序中的所有对象都具有如下存储期之一：

1. **自动存储期(automatic)**:对象的存储在外围代码块开始时分配，而在结束时解分配。未声明为 static、extern 或 thread_local 的所有局部对象均拥有此存储期。
2. **静态存储期(static)**:对象的存储在程序开始时分配，而在程序结束时解分配。只存在对象的一个实例。所有声明于命名空间作用域（包含全局命名空间）的对象，加上声明带有 static 或 extern 的对象均拥有此存储期。
3. **线程存储期(thread)**:对象的存储在线程开始时分配，而在线程结束时解分配。每个线程拥有其自身的对象实例。唯有声明为 thread_local 的对象拥有此存储期。 thread_local 能与 static 或 extern 一同出现，以调整连接。
4. **动态存储期(dynamic)**:对象的存储是通过使用动态内存分配函数来按请求进行分配和解分配的。关于具有此存储期的对象的初始化的细节，见 new 表达式。

## 连接

1. 无连接 : 名称只能在其所在的作用域访问
   1. 未显式声明为 extern 变量
   2. 局部类及其成员函数
   3. 声明于块作用域的其他名字
2. 内部链接 : 名字可从当前翻译单元中的所有作用域使用
   1. 声明为static的变量、函数或函数模板
   2. 不是 extern 的，且未声明具有外部链接的、非 volatile的 const 限定的变量
   3. 匿名 union 的数据成员
3. 外部链接 : 名字能从其他翻译单元中的作用域使用。
   1. 以上未列出的变量与函数（即未声明为 static 的函数、命名空间作用域内未声明为 static 的非 const 变量，和所有声明为 extern 的变量）；
   2. 枚举；
   3. 类名、其成员函数、静态数据成员（不论是否 const）、嵌套类及枚举，及首次以类体内的 friend 声明引入的函数；
   4. 所有未列于上的模板名（即不声明为 static 的函数模板）。
   5. 任何首次声明于块作用域的下列名称拥有外部连接：
      - 声明为 extern 的变量名；
      - 函数名。

## Reference

1. [存储类说明符](https://zh.cppreference.com/w/cpp/language/storage_duration)
